<html>
  <head>
    <script src="https://unpkg.com/vue/dist/vue.js"></script>
    <script src="https://unpkg.com/vue-router/dist/vue-router.js"></script>
  </head>
  <body>
    <div id="main">
      <router-view/>
    </div>
    <script>
      const cardText = {
        props : ['cardElement'],
        template : `<div>
                      <label>Text</label>
                      <input v-model='cardElement.text'>
                      <label>x</label>
                      <input v-model.number='cardElement.x' type='number'>
                      <label>y</label>
                      <input v-model.number='cardElement.y' type='number'>
                    </div>`
      }
      const cardTexts = {
        components : {
          'cardText' : cardText
        },
        template : `<div>
                      <h3> {{ $route.params.flavourName }} </h3>
                      <cardText v-for='cardElement in $root.decks[$route.params.deckName].flavours[$route.params.flavourName].cardElements' :cardElement='cardElement'/>
                   </div>`
      }
      const deck = {
        template : `<div>
                      <div v-for='(flavour, flavourName) in $root.decks[$route.params.deckName].flavours'>
                        <input v-model='flavourName'>
                        <router-link :to="'flavour/' + flavourName + '/'">
                          <p> Edit </p>
                        </router-link>
                      </div>
                   </div>`
      }
      const decks = {
        template : `<div>
                      <h3>Decks:</h3>
                      <router-link v-for='(deck, deckName) in this.$root.decks' :to="'deck/' + deckName + '/'" :key="deckName">
                        <div>{{ deckName }}</div>
                      </router-link>
                    </div>`
      }
      const card = {
        props : ['card'],
        template: `<div>
                     <input v-model.number='card.number' type='number'>
                     <ul>
                       <li v-for='flavour in card.flavours'>
                         {{ flavour.name }}
                       </li>
                     </ul>
                   </div>`
      }
      var routes = [
        {
          path : '/',
          component : decks
        },
        {
          path : '/deck/:deckName',
          component : deck
        },
        {
          path : '/deck/:deckName/flavour/:flavourName',
          component : cardTexts
        }
      ]
      const vueRouter = new VueRouter({
        routes : routes
      })
      const vue = new Vue({
        el: "#main",
        router : vueRouter,
        data : {
          decks : {
            "elements" : {
              flavours : {
                "flavourName1" : {
                  cardElements : [
                    {
                      text : "text1",
                      x : 100,
                      y : 100
                    },
                    {
                      text : "text2",
                      x : 200,
                      y : 100
                    }
                  ]
                },
                "flavourName2" : {
                  cardElements : [
                    {
                      text : "text1",
                      x : 100,
                      y : 100
                    },
                    {
                      text : "text2",
                      x : 200,
                      y : 100
                    }
                  ]
                }
              },
              cards : [
                {
                  number : 2,
                  flavours : [
                    "flavourName1"
                  ]
                },
                {
                  number : 3,
                  flavours : [
                    "flavourName1",
                    "flavourName2"
                  ]
                },
              ]
            },
            "customers" : {
              flavours : {
                "flavourName3" : {
                  cardElements : [
                    {
                      text : "text1",
                      x : 100,
                      y : 100
                    },
                    {
                      text : "text2",
                      x : 200,
                      y : 100
                    }
                  ]
                },
                "flavourName4" : {
                  cardElements : [
                    {
                      text : "text1",
                      x : 100,
                      y : 100
                    },
                    {
                      text : "text2",
                      x : 200,
                      y : 100
                    }
                  ]
                }
              },
              cards : [
                {
                  number : 2,
                  flavours : [
                    "flavourName1"
                  ]
                },
                {
                  number : 3,
                  flavours : [
                    "flavourName1",
                    "flavourName2"
                  ]
                },
              ]
            }
          }
        }
      })
    </script>
  </body>
</html>
